---
title: 'Hosted Form Integration'
description: 'Integrate YagoutPay using hosted form redirect method'
---

## Overview

Hosted Form integration builds the three fields required by the YagoutPay checkout form using the SDK and posts them to the action URL.

## How It Works

<Steps>
  <Step title="Build Request">
    Use the SDK to build an encrypted payment request with all transaction details
  </Step>
  <Step title="Submit Form">
    Submit the encrypted request to YagoutPay's hosted payment page
  </Step>
  <Step title="Customer Payment">
    Customer completes payment on YagoutPay's secure page
  </Step>
  <Step title="Callback Handling">
    YagoutPay redirects back to your success/failure URLs with payment results
  </Step>
</Steps>

## Implementation

### 1. Build Payment Request

<CodeGroup>
```dart Dart/Flutter
final built = buildFormPayload(
  TransactionDetails(
    aggregatorId: 'yagout',
    merchantId: '<MERCHANT_ID>',
    orderNumber: '<ORDER_NO>',
    amount: '1',
    country: 'ETH',
    currency: 'ETB',
    transactionType: 'SALE',
    successUrl: '<SUCCESS_URL>',
    failureUrl: '<FAILURE_URL>',
    channel: 'WEB',
    isLoggedIn: 'Y',
  ),
  '<ENCRYPTION_KEY_BASE64>',
  actionUrl: '<ACTION_URL>'
);
```

```typescript TypeScript/Node.js
const built = buildFormPayload({
  aggregatorId: 'yagout',
  merchantId: '202504290002',
  orderNumber: '49340',
  amount: '1',
  country: 'ETH',
  currency: 'ETB',
  transactionType: 'SALE',
  successUrl: 'http://localhost/YagoutPay/transaction//Response.php',
  failureUrl: 'http://localhost/YagoutPay/transaction//Response.php',
  channel: 'WEB',
  isLoggedIn: 'Y',
}, 'ENCRYPTION_KEY');
```

```java Java
Types.TransactionDetails details = Types.TransactionDetails.builder()
    .aggregatorId("yagout")
    .merchantId(cfg.merchantId)
    .orderNumber("ORDER" + System.currentTimeMillis())
    .amount("1.00")
    .country("ETH")
    .currency("ETB")
    .transactionType("SALE")
    .successUrl("http://localhost:3001/success")
    .failureUrl("http://localhost:3001/failure")
    .channel("WEB")
    .build();

Types.BuiltRequest built = client.build(details);
```
</CodeGroup>

### 2. Submit to YagoutPay

<CodeGroup>
```dart Dart
// Generate auto-submit form HTML from SDK output
final html = renderAutoSubmitForm(built);
```

```typescript TypeScript
// Generate auto-submit form HTML from SDK output
const html = renderAutoSubmitForm(built);
```

```java Java
// Use SDK outputs meId, merchantRequest, hash, and actionUrl to build a form post
```
</CodeGroup>

### 3. Handle Redirects

Configure `successUrl` and `failureUrl` in `TransactionDetails`. Your application should handle these routes according to your stack. The SDK does not include server routing.

## Form Fields

The hosted form requires these fields to be submitted:

<AccordionGroup>
  <Accordion title="me_id">
    Your merchant ID (provided by YagoutPay)
  </Accordion>
  <Accordion title="merchant_request">
    Encrypted transaction details (generated by SDK)
  </Accordion>
  <Accordion title="hash">
    Encrypted hash for request validation (generated by SDK)
  </Accordion>
</AccordionGroup>

## Action URL

Provided by the SDK as `actionUrl` based on environment.

## Security Considerations

<Warning>
**Security Best Practices:**
- Always use HTTPS for callback URLs
- Validate callback data before processing
- Implement proper error handling
- Use UAT environment for testing
</Warning>

<!-- Callback validation examples removed to keep SDK-only surface. -->

## Error Handling

### Common Error Scenarios

<AccordionGroup>
  <Accordion title="Invalid Request">
    - Check encryption key format
    - Validate all required fields
    - Ensure proper data types
  </Accordion>
  <Accordion title="Network Issues">
    - Implement retry logic
    - Handle timeout scenarios
    - Provide user feedback
  </Accordion>
  <Accordion title="Callback Failures">
    - Implement webhook retry mechanisms
    - Log all callback attempts
    - Handle duplicate callbacks
  </Accordion>
</AccordionGroup>

### Error Response Handling

```typescript
try {
  const built = buildFormPayload(details, encryptionKey);
  // Submit form...
} catch (error) {
  if (error.message.includes('encryption')) {
    console.error('Encryption error:', error.message);
  } else if (error.message.includes('validation')) {
    console.error('Validation error:', error.message);
  } else {
    console.error('Unexpected error:', error.message);
  }
}
```

<!-- Testing data removed. SDK does not ship test data. -->

<!-- Best practices narrowed to SDK scope above. -->

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Direct API Integration"
    icon="api"
    href="/integration/direct-api"
  >
    Learn about server-to-server API integration
  </Card>
  <Card
    title="Webhook Handling"
    icon="webhook"
    href="/guides/webhook-handling"
  >
    Comprehensive webhook implementation guide
  </Card>
</CardGroup>
